# -*- coding: utf-8 -*-
"""project Fake news using NLP.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Gs_H9qMW7nrvn27PWuHT1PrqfUPmjg44
"""

import pandas as pd #import pandas libarary

df=pd.read_csv("news_articles.csv")#upload my dataset downloaded from kaggle

df.head()#dataset description or info

df.describe()

df.info()#dataset info

df.isnull().sum()#finding the null values

df=df.fillna('')

df.isnull().sum()#fillling null values with 0

"""Now,data is preprocessed"""

df.columns #columns of dataset

df=df.drop(['author','published','main_img_url', 'type','hasImage','site_url'],axis=1,errors='ignore') #columns we droped from our dataset

df

df.head() #new datset info without drop columns

"""now,feature selection is done"""

!pip install nltk #install nltk libarary

import nltk #importing nltk library

from nltk.corpus import stopwords #Import the stopwords list from the NLTK library's corpus module.

from nltk.stem.porter import PorterStemmer #Import the PorterStemmer class from the NLTK library's stem module.

import re #Import the regular expression module.

nltk.download('stopwords')#Download the stopwords dataset from the NLTK library.

port_stem=PorterStemmer() #create an instance of the PorterStemmer class.

port_stem

port_stem.stem("Hi this is dev")

"""Define a function to preprocess text by removing non-alphabetic characters, converting to lowercase, splitting into words, removing stopwords, and applying stemming."""

def stemming(content):
   con=re.sub('[^a-zA-Z]',' ',content)
   con=con.lower()
   con=con.split()
   con=[port_stem.stem(word) for word in con if not word in stopwords.words('english')]
   con=' '.join(con)
   return con

stemming("HI,this is dev")

print(df.columns)

df['text']= df['text'].apply(stemming)

x=df['text']

y=df['label']

y.shape

from sklearn.model_selection import train_test_split #Import the train_test_split function from the sklearn.model_selection module.

x_train , x_test ,y_train, y_test = train_test_split(x,y,test_size=0.2) #Split the data into training and testing sets using the train_test_split function

from sklearn.feature_extraction.text import TfidfVectorizer #Import the TfidfVectorizer class from the sklearn.feature_extraction.text module.

vect=TfidfVectorizer()

x_train=vect.fit_transform(x_train) #Transform the training data with `fit_transform` and the testing data with `transform` using the TF-IDF vectorizer.
x_test=vect.transform(x_test)

x_train.shape

x_test.shape

from sklearn.tree import DecisionTreeClassifier #Import the DecisionTreeClassifier class from the sklearn.tree module.

model=DecisionTreeClassifier() #Create an instance of the DecisionTreeClassifier model.

model.fit(x_train,y_train)

prediction=model.predict(x_test)

prediction

model.score(x_test,y_test)

import pickle #Import the pickle module for saving and loading models.

pickle.dump(vect,open('vect.pkl','wb')) #Save the TF-IDF vectorizer using the pickle module.

pickle.dump(model,open('model.pkl','wb')) #Save the trained model using the pickle module.

pickle.load(open('vect.pkl','rb')) #Load the saved TF-IDF vectorizer.

vector_form=pickle.load(open('vect.pkl','rb')) #Load the saved TF-IDF vectorizer.

load_model=pickle.load(open('model.pkl','rb')) #Load the saved model.

def fake_news(news):
  news=stemming(news)
  input_data=[news]
  vector_form1= vector_form.transform(input_data)
  prediction=load_model.predict(vector_form1)
  return(prediction)

fake_news("""in a stunning turn of events  days before the  presidential election the fbi announced it is reopenning its investigation into hillary clintons email server case by probing newly emerging emails linked to hillary clinton
new probe the fbi gives hillary clinton a second look photo illustraion wire
fbi october surprise
according to reports  in a letter written today fbi director james comey  stated that the fbi has begun a new probe into hillary clinton related emails once again comey offered scant details about the new probe but due to an unrelated case additional classified material may have been mishandled on clintons personal email server
cnbc reported the latest fbi developments including a passage from comeys letter discussing the new investigation
in previous congressional testimony i referred to the fact that the federal bureau of investigation fbi had completed its investigation of former secretary clintons personal email server due to recent developments i am writing to supplement my previous testimony comey wrote
in connection with an unrelated case the fbi has learned of the existence of emails that appear to be pertinent to the investigation i am writing to inform you that the investigative team briefed me on this yesterday and i agreed that the fbi should take appropriate investigative steps designed to allow investigators to review these emails to determine whether they contain classified information as well as to assess their importance to our investigation he added
although the fbi cannot yet assess whether or not this material may be significant and i cannot predict how long it will take us to complete this additional work i believe it is important to update your committees about our efforts in light of my previous testimony comey concluded
humas estranged sexting husband
according to a new report released via the new york times
the presidential campaign was rocked on friday after federal law enforcement officials said that emails pertinent to the nowclosed investigation into hillary clinton s private email server were discovered on a computer belonging to anthony d weiner the estranged husband of a top clinton aide  in a letter to congress  the fbi director james b comey said the emails had surfaced in an unrelated case which law enforcement officials said was an fbi investigation into illicit text messages from mr weiner to a yearold girl in north carolina mr weiner a former democratic congressman from new york is married to huma abedin the top aide comey has come under fire recently for apparently letting clinton off the hook for mishandling and lying to congress about classified emails coming through her home brew email server while she was secretary of state after previously closing the case comey has done a uturn and is now saying the fbi will review the new emails to for classified information and see whether it was mishandled
this unprecedented investigative move comes just two days after a wikileaks docudump revealed a memo containing detailed financial information between clinton foundation donors and former president bill clinton s private financial activities among those included in the memo was a  million dollar business arrangement under bill clinton inc with another  million dollar deal scheduled over nine years
the following is a tweet from brad jaffy of nbc nightly news containing the new fbi recommendation
the new investigation into the clinton camp will most certainly spark new paytoplay allegations  as the new fbi revelations also comes days after a project veritas hidden camera sting operation revealed that the democratic consultant robert creamer of democracy partners discussed ways to commit largescale voter fraud as well as paying political agitators to cause violence at donald trump rallies out of creamers  visits to the white house also included his wife a term illinois democratic congresswoman jan schakowsky some  times white house visitor records show that schakowsky took  private meetings with obama or his senior staff also over the past year the consultancy democracy partners appears to have applied schakowsky as a political buffering point possibly in the event of a fallout over their operations at a grassroots level the impetus of this type of procedural separation is to keep certain highranking officials of the hook in case of a massive upheaval over various underhanded campaign tactics  thus giving a political campaign or political entity plausible deniability caught on film  robert creamer resigns over a massive democratic party controversy image source cnn  creamer a convicted felon  in  creamer plead guilty  million in bank fraud and tax violations was promptly shoved out of the hillary clinton campaigns inner circle following a heavily publicized video sting revealing his discussion about voter fraud and violence at trump rallies pay to play virginia governor terry mcauliffe closely allied with the clintons negotiated a a campaign contribution involving the fbi image source new republic  it remains unclear what exactly reopened the new clinton probe but perhaps the fbi had its own cobwebs to clear out after it was revealed that a longtime clinton associate  virginia gov terry mcauliffe  helped steer  to the election campaign of the wife of an fbi official who went on to lead the probe into hillary clintons use of a private email system according to a report the ny post also reported on the matter this past week
the political action committee of mcauliffe the clinton loyalist gave  to the state senate campaign of the wife of andrew mccabe who is now deputy director of the fbi according to the wall street journal
the report states jill mccabe received an additional  from the virginia democratic party which is heavily influenced by mcauliffe
the money directed by mcauliffe began flowing two months after the fbi investigation into clinton began in july  around that time the candidates husband was promoted from running the washington field office for the fbi to the no  position at the bureau
in a cnn report from october th a week before the mcauliffe revelations according to notes from interviews conducted during an fbi investigation into clintons email practices undersecretary of state patrick kennedy personally tried to convince fbi officials that the email should be declassified one interviewee described feeling pressured by another fbi official at kennedys request
the newly reopened fbi investigation into clinton could be related to all or some of the items listed above but theres no doubt that due to public backlash the fbi received following the first clinton investigation in addition to concerns over dealings between the fbi and clinton associates  the agency needed to save face
it remains to be seen how new case will impact the us presidential election
more from rt below """)